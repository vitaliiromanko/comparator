<!DOCTYPE HTML>
<html lang="uk">
<head th:insert="fragments/basicFragments :: headFragment"></head>

<style>
    label {
        text-align: right;
    }
</style>

<body>

<header th:insert="fragments/basicFragments :: navbar"></header>

<div class="container mt-5 mb-4">
    <div id="loginContainer" class="m-auto" style="width: 700px;">
        <h5 id="pageTitle" class="text-center mb-4">Профіль</h5>

        <th:block th:if="${message}">
            <div th:class="'alert alert-' + ${messageType} + ' text-center'" role="alert" th:text="${message}"></div>
        </th:block>

        <form id="profileForm" action="/user/profile" method="post">
            <div class="form-group row">
                <div class="row" style="margin-bottom: 30px">
                    <label class="col-3 col-form-label">Ім'я:</label>
                    <div class="col-9">
                        <input id="firstName" type="text" name="firstName" th:value="${user.firstName}"
                               class="form-control position-relative"/>
                        <div id="firstNameError" class="invalid-feedback position-absolute"
                             style="width: fit-content"></div>
                    </div>
                </div>
            </div>

            <div class="form-group row">
                <div class="row" style="margin-bottom: 30px">
                    <label class="col-3 col-form-label">Прізвище:</label>
                    <div class="col-9">
                        <input id="lastName" type="text" name="lastName" th:value="${user.lastName}"
                               class="form-control position-relative"/>
                        <div id="lastNameError" class="invalid-feedback position-absolute"
                             style="width: fit-content"></div>
                    </div>
                </div>
            </div>

            <div class="form-group row">
                <div class="row" style="margin-bottom: 30px">
                    <label class="col-3 col-form-label">Логін:</label>
                    <div class="col-9">
                        <th:block th:if="${usernameError}">
                            <input id="username" type="text" name="username" th:value="${user.username}"
                                   class="form-control is-invalid position-relative"/>
                            <div id="usernameError" class="invalid-feedback position-absolute"
                                 style="width: fit-content"
                                 th:text="${usernameError}"></div>
                        </th:block>
                        <th:block th:unless="${usernameError}">
                            <input id="username" type="text" name="username" th:value="${user.username}"
                                   class="form-control position-relative"/>
                            <div id="usernameError" class="invalid-feedback position-absolute"
                                 style="width: fit-content"></div>
                        </th:block>
                    </div>
                </div>
            </div>

            <div class="form-group row">
                <div class="row" style="margin-bottom: 30px">
                    <label class="col-3 col-form-label">Старий пароль:</label>
                    <div class="col-9">
                        <th:block th:if="${oldPasswordError}">
                            <input id="oldPassword" type="password" name="oldPassword"
                                   class="form-control is-invalid position-relative"/>
                            <div id="oldPasswordError" class="invalid-feedback position-absolute"
                                 style="width: fit-content"
                                 th:text="${oldPasswordError}"></div>
                        </th:block>
                        <th:block th:unless="${oldPasswordError}">
                            <input id="oldPassword" type="password" name="oldPassword"
                                   class="form-control position-relative"/>
                            <div id="oldPasswordError" class="invalid-feedback position-absolute"
                                 style="width: fit-content"></div>
                        </th:block>
                    </div>
                </div>
            </div>

            <div class="form-group row">
                <div class="row" style="margin-bottom: 30px">
                    <label class="col-3 col-form-label">Новий пароль:</label>
                    <div class="col-9">
                        <th:block th:if="${newPasswordError}">
                            <input id="newPassword" type="password" name="newPassword"
                                   class="form-control is-invalid position-relative"/>
                            <div id="newPasswordError" class="invalid-feedback position-absolute"
                                 style="width: fit-content"
                                 th:text="${newPasswordError}"></div>
                        </th:block>
                        <th:block th:unless="${newPasswordError}">
                            <input id="newPassword" type="password" name="newPassword"
                                   class="form-control position-relative"/>
                            <div id="newPasswordError" class="invalid-feedback position-absolute"
                                 style="width: fit-content"></div>
                        </th:block>
                    </div>
                </div>
            </div>

            <div class="form-group row">
                <div class="row" style="margin-bottom: 30px">
                    <label class="col-3 col-form-label">Електронна пошта:</label>
                    <div class="col-9">
                        <input id="email" type="email" name="email" th:value="${user.email}"
                               class="form-control position-relative"
                               placeholder="Електронна пошта" readonly/>
                    </div>
                </div>
            </div>

            <div id="profileButtonContainer" class="text-center">
                <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}"/>
                <button class="btn btn-dark" type="submit">Зберегти</button>
            </div>
        </form>
    </div>
</div>
<script src="/static/js/validationProfile.js"></script>
</body>
</html>